% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/cmdstanr-package.R
\docType{package}
\name{cmdstanr-package}
\alias{cmdstanr-package}
\alias{cmdstanr}
\alias{CmdStanR}
\title{CmdStanR: the \R interface to CmdStan}
\description{
\if{html}{
   \figure{logo.png}{options: width="50px" alt="https://mc-stan.org/about/logo/"}
   \emph{Stan Development Team}
}

\pkg{CmdStanR}: the \R interface to CmdStan.
}
\details{
CmdStanR (\pkg{cmdstanr} package) is a lightweight interface to Stan
(\href{https://mc-stan.org}{mc-stan.org}) for \R users. It provides the
necessary objects and functions to compile a Stan program and run Stan's
algorithms from \R via CmdStan, the shell interface to Stan
(\href{https://mc-stan.org/users/interfaces/cmdstan}{mc-stan.org/users/interfaces/cmdstan}).
}
\section{Getting started}{
 CmdStanR requires a working version of CmdStan. If
you already have CmdStan installed see \code{\link[=cmdstan_model]{cmdstan_model()}} to get
started, otherwise see \code{\link[=install_cmdstan]{install_cmdstan()}} for help with installation.
}

\section{Comparison with RStan}{
 The RStan interface (\pkg{rstan} package) is
an in-memory interface to Stan and relies on \R packages like \pkg{Rcpp}
and \pkg{inline} to call C++ code from R. On the other hand, the \R code in
this package does not directly call any C++ code, instead relying on
CmdStan for compilation, running algorithms, and writing results to output
files.

Both forms of interfacing with Stan have advantages and disadvantages. An
in-memory interface like RStan is able to offer more advanced features than
CmdStanR (for example the \code{rstan::log_prob()} and \code{rstan::grad_log_prob()}
methods) but keeping up with Stan releases is more complicated for RStan,
often requiring non-trivial changes to the \pkg{rstan} package and always
requiring new CRAN releases of \pkg{rstan} and \pkg{StanHeaders}. With
CmdStanR, the latest features in Stan will be available from \R immediately
after updating CmdStan, which can be done with the \code{\link[=install_cmdstan]{install_cmdstan()}}
function. We also anticipate that running Stan via external processes will
have the advantage of playing nicer with R (and RStudio) and result in fewer
unexpected crashes than when using RStan.

Another difference between RStan and CmdStanR is the license. RStan is
GPL-3 while the license for CmdStanR (like Stan) is BSD-3, which is a bit
more permissive.
}

\examples{
\dontrun{
# Set path to cmdstan
# (Note: if you installed CmdStan via install_cmdstan() with default settings
# then setting the path is unnecessary but the default below should still work.
# Otherwise use the `path` argument to specify the location of your
# CmdStan installation.)

set_cmdstan_path(path = NULL)

# Create a CmdStanModel object from a Stan program,
# here using the example model that comes with CmdStan
stan_program <- file.path(cmdstan_path(), "examples/bernoulli/bernoulli.stan")
mod <- cmdstan_model(stan_program)
mod$print()

# data as a named list (like RStan)
stan_data <- list(N = 10, y = c(0,1,0,0,0,0,0,0,0,1))
fit_mcmc <- mod$sample(
  data = stan_data,
  seed = 123,
  num_chains = 2,
  num_cores = 2
)

# Use 'posterior' package for summaries
fit_mcmc$summary()

# Call CmdStan's bin/stansummary
fit_mcmc$cmdstan_summary()

# Call CmdStan's bin/diagnose
fit_mcmc$cmdstan_diagnose()

# For models fit using MCMC, if you like working with RStan's stanfit objects
# then you can create one with rstan::read_stan_csv()
if (require(rstan, quietly = TRUE)) {
  stanfit <- rstan::read_stan_csv(fit_mcmc$output_files())
  print(stanfit)
}


# Run optimization method (default is Stan's LBFGS algorithm)
# and also demonstrate specifying data as a path to a file (readable by CmdStan)
my_data_file <- file.path(cmdstan_path(), "examples/bernoulli/bernoulli.data.json")
fit_optim <- mod$optimize(data = my_data_file, seed = 123)

#' Print estimates
fit_optim$summary()

# Run variational Bayes method (default is meanfield ADVI)
fit_vb <- mod$variational(data = stan_data, seed = 123)

# Call CmdStan's bin/summary
fit_vb$summary()

}

}
\seealso{
The CmdStanR website (\href{https://mc-stan.org/cmdstanr/}{mc-stan.org/cmdstanr})
for online documentation and tutorials.

The Stan and CmdStan documentation:
\itemize{
\item Stan doc (html or pdf): \href{https://mc-stan.org/users/documentation/}{mc-stan.org/users/documentation/}
\item CmdStan doc (pdf): (\href{https://github.com/stan-dev/cmdstan/releases/latest}{github.com/stan-dev/cmdstan/releases/}).
}
}
